using System;

namespace srd5 {
    public enum Feat {
        NONE,
        // Racial Feats
        // Dwarves
        DWARVEN_ABILITY_INCREASE,
        DWARVEN_DARKVISION,
        DWARVEN_RESILIENCE,
        DWARVEN_SMITH,
        DWARVEN_BREWER,
        DWARVEN_MASON,
        DWARVEN_COMBAT_TRAINING,
        STONECUNNING,
        HILL_DWARVEN_ABILITY_INCREASE,
        DWARVEN_TOUGHNESS,
        // Elves
        ELVEN_ABILITY_INCREASE,
        ELVEN_DARKVISION,
        KEEN_SENSES,
        FEY_ANCESTRY,
        HIGH_ELVEN_ABILITY_INCREASE,
        HIGH_ELVEN_WEAPON_TRAINING,
        HIGH_ELVEN_CANTRIP,
        // Humans
        HUMAN_ABILITY_INCREASE,

        // Class Feats
        // Barbarian
        RAGE,
        UNARMORED_DEFENSE,
        RECKLESS_ATTACK,
        DANGER_SENSE,
        FRENZY,


        // Monster Feats (Special Abilities)
        // Monster Special Abilities
        ABERRANT_GROUND,
        ACID_ABSORPTION,
        ADHESIVE,
        AGGRESSIVE,
        AIR_FORM,
        AMBUSHER,
        AMORPHOUS,
        AMPHIBIOUS,
        ANGELIC_WEAPONS_4D8,
        ANGELIC_WEAPONS_5D8,
        ANGELIC_WEAPONS_6D8,
        ANTIMAGIC_SUSCEPTIBILITY,
        ASSASSINATE,
        AVERSION_OF_FIRE,
        BARBED_HIDE,
        BEAST_OF_BURDEN,
        BERSERK_CLAY_GOLEM,
        BERSERK_FLESH_GOLEM,
        BLIND_SENSES,
        BLOOD_FRENZY,
        BOUND,
        BRAVE,
        BRUTE,
        CHARGE_BOAR,
        CHARGE_CENTAUR,
        CHARGE_ELK,
        CHARGE_GIANT_BOAR,
        CHARGE_GIANT_ELK,
        CHARGE_GIANT_GOAT,
        CHARGE_GIANT_SEA_HORSE,
        CHARGE_GOAT,
        CHARGE_MINOTAUR,
        CHARGE_MINOTAUR_SKELETON,
        CHARGE_RHINOCEROS,
        CHARGE_UNICORN,
        CHARGE_WEREBOAR,
        CONFER_FIRE_RESISTANCE,
        CONSUME_LIFE,
        CORRODE_METAL,
        CORROSIVE_FORM,
        CUNNING_ACTION,
        DAMAGE_TRANSFER_ATTACHED,
        DAMAGE_TRANSFER_GRAPPLING,
        DARK_DEVOTION,
        DEATH_BURST_DUST_MEPHIT,
        DEATH_BURST_ICE_MEPHIT,
        DEATH_BURST_MAGMA_MEPHIT,
        DEATH_BURST_MAGMIN,
        DEATH_BURST_STEAM_MEPHIT,
        DEATH_THROES,
        DEVILS_SIGHT,
        DIVINE_AWARENESS,
        DIVINE_EMINENCE,
        DUERGAR_RESILIENCE,
        EARTH_GLIDE,
        ECHOLOCATION,
        ELEMENTAL_DEMISE_DJINNI,
        ELEMENTAL_DEMISE_EFREETI,
        EPHEMERAL,
        ETHEREAL_JAUNT,
        ETHEREAL_SIGHT,
        EVASION,
        FALSE_APPEARANCE,
        FAULTLESS_TRACKER,
        FEAR_AURA,
        FIRE_ABSORPTION,
        FIRE_AURA,
        FIRE_FORM,
        FLYBY,
        FREEDOM_OF_MOVEMENT,
        FREEZE,
        GIBBERING,
        GNOME_CUNNING,
        GRAPPLER,
        GRASPING_TENDRILS,
        HEATED_BODY_1D10,
        HEATED_BODY_2D6,
        HEATED_BODY_3D6,
        HEATED_WEAPONS,
        HELLISH_REJUVENATION,
        HELLISH_WEAPONS,
        HOLD_BREATH_15MIN,
        HOLD_BREATH_30MIN,
        HOLD_BREATH_1HOUR,
        HORRIFIC_APPEARANCE,
        ICE_WALK,
        IGNITED_ILLUMINATION,
        ILLUMINATION_10FT,
        ILLUMINATION_30FT,
        IMMUTABLE_FORM,
        INCORPOREAL_MOVEMENT,
        INNATE_SPELLCASTING_CLOUD_GIANT,
        INNATE_SPELLCASTING_COUATL,
        INNATE_SPELLCASTING_CULT_FANATIC,
        INNATE_SPELLCASTING_DEEP_GNOME,
        INNATE_SPELLCASTING_DEVA,
        INNATE_SPELLCASTING_DJINNI,
        INNATE_SPELLCASTING_DRIDER,
        INNATE_SPELLCASTING_DROW,
        INNATE_SPELLCASTING_DRYAD,
        INNATE_SPELLCASTING_DUST_MEPHIT,
        INNATE_SPELLCASTING_EFREETI,
        INNATE_SPELLCASTING_GLABREZU,
        INNATE_SPELLCASTING_GREEN_HAG,
        INNATE_SPELLCASTING_ICE_MEPHIT,
        INNATE_SPELLCASTING_LAMIA,
        INNATE_SPELLCASTING_MAGMA_MEPHIT,
        INNATE_SPELLCASTING_NIGHT_HAG,
        INNATE_SPELLCASTING_ONI,
        INNATE_SPELLCASTING_PIT_FIEND,
        INNATE_SPELLCASTING_PLANETAR,
        INNATE_SPELLCASTING_RAKSHASA,
        INNATE_SPELLCASTING_SOLAR,
        INNATE_SPELLCASTING_STEAM_MEPHIT,
        INNATE_SPELLCASTING_STORM_GIANT,
        INNATE_SPELLCASTING_UNICORN,
        INSCRUTABLE,
        INVISIBILITY,
        IRON_SCENT,
        KEEN_HEARING,
        KEEN_HEARING_AND_SIGHT,
        KEEN_HEARING_AND_SMELL,
        KEEN_SIGHT,
        KEEN_SIGHT_AND_SMELL,
        KEEN_SMELL,
        LABYRINTHINE_RECALL,
        LEGENDARY_RESISTANCE,
        LIGHT_SENSITIVITY,
        LIGHTNING_ABSORPTION,
        LIMITED_AMPHIBIOUSNESS,
        LIMITED_MAGIC_IMMUNITY,
        LIMITED_TELEPATHY_OTYUGH,
        LIMITED_TELEPATHY_PSEUDODRAGON,
        MAGIC_RESISTANCE,
        MAGIC_WEAPONS,
        MARTIAL_ADVANTAGE,
        MIMICRY_HAG,
        MIMICRY_RAVEN,
        MISTY_ESCAPE,
        MUCOUS_CLOUD,
        MULTIPLE_HEADS,
        NIGHT_HAG_ITEMS,
        NIMBLE_ESCAPE,
        OOZE_CUBE,
        PACK_TACTICS,
        PETRIFYING_GAZE_BASILISK,
        PETRIFYING_GAZE_MEDUSA,
        POUNCE_LION,
        POUNCE_PANTHER,
        POUNCE_TIGER_13,
        POUNCE_TIGER_14,
        POUNCE_WERETIGER,
        PROBING_TELEPATHY,
        RAMPAGE,
        REACTIVE,
        REACTIVE_HEADS,
        RECKLESS,
        REFLECTIVE_CARAPACE,
        REGENERATION,
        REGENERATION_TROLL,
        REGENERATION_VAMPIRE,
        REGENERATION_VAMPIRE_SPAWN,
        REJUVENATION_LICH,
        REJUVENATION_MUMMY_LORD,
        REJUVENATION_NAGA,
        RELENTLESS_7,
        RELENTLESS_10,
        RELENTLESS_14,
        RUNNING_LEAP,
        RUST_METAL,
        SENSE_MAGIC,
        SHADOW_STEALTH,
        SHAPECHANGER_DOPPELGANGER,
        SHAPECHANGER_FIEND,
        SHAPECHANGER_IMP,
        SHAPECHANGER_MIMIC,
        SHAPECHANGER_QUASIT,
        SHAPECHANGER_VAMPIRE,
        SHAPECHANGER_WEREBEAST,
        SHARK_TELEPATHY,
        SHIELDED_MIND,
        SIEGE_MONSTER,
        SNEAK_ATTACK_2D6,
        SNEAK_ATTACK_4D6,
        SNOW_CAMOUFLAGE,
        SPEAK_WITH_BEASTS_AND_PLANTS,
        SPELL_STORING,
        SPELLCASTING_ACOLYTE,
        SPELLCASTING_ANDROSPHINX,
        SPELLCASTING_ARCHMAGE,
        SPELLCASTING_DRUID,
        SPELLCASTING_FANATIC,
        SPELLCASTING_GYNOSPHINX,
        SPELLCASTING_LICH,
        SPELLCASTING_MAGE,
        SPELLCASTING_MUMMY_LORD,
        SPELLCASTING_NAGA_10,
        SPELLCASTING_NAGA_11,
        SPELLCASTING_PRIEST,
        SPIDER_CLIMB,
        STANDING_LEAP_BULETTE,
        STANDING_LEAP_FROG_10FT,
        STANDING_LEAP_FROG_20FT,
        STANDING_LEAP_TOAD,
        STEADFAST,
        STENCH_GHAST,
        STENCH_HEZROU,
        STONE_CAMOUFLAGE,
        SUNLIGHT_SENSITIVITY,
        SUNLIGHT_WEAKNESS,
        SURE_FOOTED,
        SURPRISE_ATTACK_BUGBEAR,
        SURPRISE_ATTACK_DOPPELGANGER,
        SWARM,
        TAIL_SPIKE_REGROWTH,
        TELEPATHIC_BOND_HOMUNCULUS,
        TELEPATHIC_BOND_FIEND,
        TRAMPLING_CHARGE_ELEPHANT,
        TRAMPLING_CHARGE_GORGON,
        TRAMPLING_CHARGE_HORSE,
        TRAMPLING_CHARGE_MAMMOTH,
        TRAMPLING_CHARGE_TRICERATOPS,
        TRANSPARENT,
        TREASURE_SENSE,
        TREE_STRIDE,
        TUNNELER,
        TURN_DEFIANCE,
        TURN_RESISTANCE,
        TWO_HEADS,
        TWO_HEADED,
        UNDEAD_FORTITUDE,
        UNDERWATER_CAMOUFLAGE,
        VAMPIRE_WEAKNESSES,
        VARIABLE_ILLUMINATION,
        WAKEFUL,
        WATER_BREATHING,
        WATER_FORM,
        WATER_SUSCEPTIBILITY,
        WEB_SENSE,
        WEB_WALKER
    }

    public static class FeatExtension {
        public static void Apply(this Feat feat, Combattant combattant) {
            switch (feat) {
                case Feat.DWARVEN_ABILITY_INCREASE:
                    combattant.Constitution.BaseValue += 2;
                    break;
                case Feat.DWARVEN_DARKVISION:
                case Feat.ELVEN_DARKVISION:
                    combattant.AddEffect(Effect.DARKVISION);
                    break;
                case Feat.DWARVEN_RESILIENCE:
                    combattant.AddEffect(Effect.RESISTANCE_POISON);
                    combattant.AddEffect(Effect.ADVANTAGE_SAVE_POISON);
                    break;
                case Feat.DWARVEN_SMITH:
                    combattant.AddProficiency(Proficiency.SMITH);
                    break;
                case Feat.DWARVEN_BREWER:
                    combattant.AddProficiency(Proficiency.BREWER);
                    break;
                case Feat.DWARVEN_MASON:
                    combattant.AddProficiency(Proficiency.MASON);
                    break;
                case Feat.DWARVEN_COMBAT_TRAINING:
                    combattant.AddProficiency(Proficiency.BATTLEAXE);
                    combattant.AddProficiency(Proficiency.HANDAXE);
                    combattant.AddProficiency(Proficiency.LIGHT_HAMMER);
                    combattant.AddProficiency(Proficiency.WARHAMMER);
                    combattant.AddEffect(Effect.NO_SPEED_PENALITY_FOR_HEAVY_ARMOR);
                    break;
                case Feat.STONECUNNING:
                    combattant.AddProficiency(Proficiency.HISTORY);
                    combattant.AddEffect(Effect.DOUBLE_PROFICIENCY_BONUS_HISTORY);
                    break;
                case Feat.HILL_DWARVEN_ABILITY_INCREASE:
                    combattant.Wisdom.BaseValue += 1;
                    break;
                case Feat.DWARVEN_TOUGHNESS:
                    combattant.AddEffect(Effect.ADDITIONAL_HP_PER_LEVEL);
                    break;
                case Feat.ELVEN_ABILITY_INCREASE:
                    combattant.Dexterity.BaseValue += 2;
                    break;
                case Feat.KEEN_SENSES:
                    combattant.AddProficiency(Proficiency.PERCEPTION);
                    break;
                case Feat.FEY_ANCESTRY:
                    combattant.AddEffect(Effect.IMMUNITY_SLEEP);
                    combattant.AddEffect(Effect.ADVANTAGE_SAVE_CHARM);
                    break;
                case Feat.HIGH_ELVEN_ABILITY_INCREASE:
                    combattant.Intelligence.BaseValue += 1;
                    break;
                case Feat.HIGH_ELVEN_WEAPON_TRAINING:
                    combattant.AddProficiency(Proficiency.SHORTBOW);
                    combattant.AddProficiency(Proficiency.SHORTSWORD);
                    combattant.AddProficiency(Proficiency.LONGBOW);
                    combattant.AddProficiency(Proficiency.LONGSWORD);
                    break;
                case Feat.HIGH_ELVEN_CANTRIP:
                    break;
                case Feat.HUMAN_ABILITY_INCREASE:
                    combattant.Strength.BaseValue++;
                    combattant.Constitution.BaseValue++;
                    combattant.Dexterity.BaseValue++;
                    combattant.Wisdom.BaseValue++;
                    combattant.Intelligence.BaseValue++;
                    combattant.Charisma.BaseValue++;
                    break;
                case Feat.LEGENDARY_RESISTANCE:
                    combattant.AddEffect(Effect.LEGENDARY_RESISTANCE, Effect.LEGENDARY_RESISTANCE, Effect.LEGENDARY_RESISTANCE);
                    break;
            }
        }

        public static bool IsShapeChanger(this Feat feat) {
            return Enum.GetName(typeof(Feat), feat).IndexOf("SHAPECHANGER") == 0;
        }
    }
}